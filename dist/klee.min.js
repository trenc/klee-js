const KLEEVERSION="0.1.0-rc1";function getDefaultOptions(e){return{debugLevel:0,responsive:!0,renderer:{type:"WebGLRenderer",args:[{antialias:!0,preserveDrawingBuffer:!0,alpha:!0}],domElement:"body",clearColor:"#000000",opacity:1,properties:{shadowMap:{enabled:!0,type:e.PCFSoftShadowMap}}},camera:{type:"PerspectiveCamera",methods:{lookAt:[0,0,0]},properties:{position:{x:-1,y:2,z:5},name:"camera-1",fov:35,aspect:window.innerWidth/window.innerHeight,near:1,far:300}},scene:{type:"Scene",properties:{name:"scene-1",position:{x:0,y:0,z:0}}}}}class Utils{static merge(e,t){if(!t||"object"!=typeof t)return e;for(const n of Object.keys(t))t[n]instanceof Object&&Object.assign(t[n],this.merge(e[n],t[n]));return Object.assign(e||{},t),e}static isThreeColorValue(e){return["color","specular","emissive","diffuse","background"].includes(e)}static applyMethods(e,t){t=t||{};for(const n in t){const r=Array.isArray(t[n])?t[n]:[];e[n](...r)}return e}}const App=function(){let e,t={};const n={canvas:null,camera:null,renderer:null,scene:null,controls:null};function r(t){const n=Array.isArray(t.args)?t.args:[];return new e[t.type](...n)}function o(e,n){const r=t.debugLevel||3;switch(n){case"error":throw e;case"warn":r>0&&console.warn(e);break;case"info":r>2&&console.info(e);break;default:r>1&&console.log(e)}}function c(e){o(e,"error")}function a(e){o(e,"warn")}return{get options(){return t},get THREE(){return e},get scene(){return n.scene},set scene(e){n.scene=e},get camera(){return n.camera},set camera(e){n.camera=e},get controls(){return n.controls},set controls(e){n.controls=e},get renderer(){return n.renderer},initSize:function(){const e=t.responsive||!1,r=n.camera.fov,o=n.canvas.clientWidth;let c=n.canvas.clientWidth,a=n.canvas.clientHeight;n.renderer.setSize(c,a),n.camera.aspect=c/a,n.camera.updateProjectionMatrix(),!1!==e&&window.addEventListener("resize",()=>{const e=window.innerWidth;c=n.canvas.clientWidth,a=n.canvas.clientHeight,e!==c&&(n.renderer.setSize(e,a),n.camera.aspect=e/a,n.camera.fov=r*o/e,n.camera.updateProjectionMatrix())})},create:r,error:c,warn:a,log:function(e){o(e,"log")},info:function(e){o(e,"info")},init:function(o,i={}){o&&o.REVISION||c("THREE is not inserted"),e={...o},i&&"object"==typeof i||(i={},a("Options are set to default values"));const s=Utils.merge(getDefaultOptions(e),i);t={...s},n.renderer=function(t){const o=document.querySelector(t.domElement);o instanceof HTMLCanvasElement&&(t.args.canvas=o,n.canvas=o);let c=r(t);return(c=function(e,t){return Utils.merge(e,t)}(c,t.properties)).setClearColor(new e.Color(t.clearColor),t.opacity),c.setPixelRatio(window.devicePixelRatio),n.canvas||(o.appendChild(c.domElement),n.canvas=c.domElement),c.setSize(n.canvas.clientWidth,n.canvas.clientHeight),c}(t.renderer)},run:function e(t){n.renderer.render(n.scene,n.camera),n.controls&&(n.controls.enableDamping||n.controls.autoRotate)&&n.controls.update(),"function"==typeof t&&t(),requestAnimationFrame(()=>e())}}}(),Object3d=function(){function e(e){const n=App.THREE,r=Array.isArray(e.args)?e.args:[];let o=new n[e.type](...r);return o=t(o,e)}function t(e,t){return t.properties&&(e=function e(t,r){const o=App.THREE;if(!r||"object"!=typeof r)return t;for(const c in r)if(r[c]instanceof Object)if(n(t[c])){const e={...t[c],...r[c]};t[c].copy(e)}else t[c]=e(t[c],r[c]);else Utils.isThreeColorValue(c)?t[c]=new o.Color(r[c]):t[c]=r[c];return t}(e,t.properties)),t.methods&&(e=Utils.applyMethods(e,t.methods)),e}function n(e){const t=App.THREE;return e instanceof t.Vector2||e instanceof t.Vector3||e instanceof t.Vector4}return{add:function(t){const n=e(t);return App.scene.add(n),n},create:e,change:t}}(),Scene=function(){return{init:function(){const e=App.options;App.camera=function(e){const t=Object3d.create(e);return t.updateProjectionMatrix(),t}(e.camera),App.scene=function(e){return Object3d.create(e)}(e.scene),App.initSize()}}}(),Controls=function(){return{init:function(e,t){App.controls=function(e,t){let n=new e(App.camera,App.renderer.domElement);return n=Object3d.change(n,t)}(e,t)}}}(),Light=function(){function e(e){return Object3d.create(e)}function t(t){const n=e(t);return App.scene.add(n),n}return{add:function(e){if("object"==typeof e&&e.type)return t(e);const n=[];return Array.isArray(e)&&e.forEach(e=>{const r=t(e);n.push(r)}),n},create:e,change:function(e,t){return e=Object3d.change(e,t)}}}(),Material=function(){function e(e,t){return t.properties&&(e=function(e,t){const n=App.THREE;if(!t||"object"!=typeof t)return e;for(const r in t)t[r]instanceof Object?e[r]={...t[r]}:Utils.isThreeColorValue(r)?e[r]=new n.Color(t[r]):e[r]=t[r];return e}(e,t.properties)),t.methods&&(e=Utils.applyMethods(e,t.methods)),e}return{create:function(t){t||(t={type:"MeshPhongMaterial",args:[{color:16777215}]});let n=App.create(t);return n=e(n,t)},change:e}}(),Geometry=function(){return{create:function(e){e||(e={type:"BoxBufferGeometry",args:[1,1,1]});let t=App.create(e);return t=Utils.merge(t,e.properties)}}}(),Item=function(){function e(e){const t=App.THREE,n=Material.create(e.material),r=Geometry.create(e.geometry);let o=new t.Mesh(r,n);return o=function(e,t){return e=Object3d.change(e,t)}(o,e)}function t(t){const n=e(t);return App.scene.add(n),n}return{add:function(e){if("object"==typeof e&&e.geometry)return t(e);const n=[];return Array.isArray(e)&&e.forEach(e=>{const r=t(e);n.push(r)}),n},create:e}}();console.log("klee.js: 0.1.0-rc1");export{App,Controls,Geometry,Item,KLEEVERSION,Light,Material,Object3d,Scene};