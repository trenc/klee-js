var R="0.1.2";function T(s){return{debugLevel:0,responsive:!0,renderer:{type:"WebGLRenderer",args:[{antialias:!0,preserveDrawingBuffer:!0,alpha:!0}],domElement:"body",clearColor:"#000000",opacity:1,properties:{shadowMap:{enabled:!0,type:s.PCFSoftShadowMap}}},camera:{type:"PerspectiveCamera",methods:{lookAt:[0,0,0]},properties:{position:{x:-1,y:2,z:5},name:"camera-1",fov:35,aspect:window.innerWidth/window.innerHeight,near:1,far:300}},scene:{type:"Scene",properties:{name:"scene-1",position:{x:0,y:0,z:0}}}}}var d=class{static merge(i,r){if(!r||typeof r!="object")return i;for(let n of Object.keys(r))r[n]instanceof Object&&Object.assign(r[n],this.merge(i[n],r[n]));return Object.assign(i||{},r),i}static isThreeColorValue(i){return["color","specular","emissive","diffuse","background","sheen"].includes(i)}static applyMethods(i,r){r=r||{};for(let n in r){let e=Array.isArray(r[n])?r[n]:[];n in i?i[n](...e):console.log("Applied object has no method: "+n)}return i}};var o=function(){let s={},i,r={canvas:null,camera:null,renderer:null,scene:null,controls:{},draggables:[]};async function n(a=[]){if(!Array.isArray(a)||a.length<=0){x("Images could not be preloaded. Wrong or no argument given.");return}i.Cache.enabled=!0;let f=new i.ImageLoader;return await Promise.all(a.map(async u=>await f.loadAsync(u)))}function e(a,f={}){(!a||!a.REVISION)&&O("THREE is not inserted"),i={...a},(!f||typeof f!="object")&&(f={},x("Options are set to default values")),s={...d.merge(T(i),f)},r.renderer=c(s.renderer)}function t(a){r.renderer.render(r.scene,r.camera),r.controls.orbit&&(r.controls.orbit.enableDamping||r.controls.orbit.autoRotate)&&r.controls.orbit.update(),typeof a=="function"&&a(),requestAnimationFrame(()=>t(a))}function l(){let a=s.responsive||!1,f=r.camera.fov,u=r.canvas.clientWidth,E=r.canvas.clientWidth,y=r.canvas.clientHeight;r.renderer.setSize(E,y),r.camera.aspect=E/y,r.camera.updateProjectionMatrix(),a!==!1&&window.addEventListener("resize",()=>{let w=window.innerWidth;E=r.canvas.clientWidth,y=r.canvas.clientHeight,w!==E&&(r.renderer.setSize(w,y),r.camera.aspect=w/y,r.camera.fov=f*u/w,r.camera.updateProjectionMatrix())})}function c(a){let f=document.querySelector(a.domElement);f instanceof HTMLCanvasElement&&(a.args.canvas=f,r.canvas=f);let u=m(a);return u=g(u,a.properties),u.setClearColor(new i.Color(a.clearColor),a.opacity),u.setPixelRatio(window.devicePixelRatio),r.canvas||(f.appendChild(u.domElement),r.canvas=u.domElement),u.setSize(r.canvas.clientWidth,r.canvas.clientHeight),u}function m(a){let f=Array.isArray(a.args)?a.args:[];return new i[a.type](...f)}function g(a,f){return d.merge(a,f)}function h(a,f){let u=s.debugLevel!==void 0?s.debugLevel:3;switch(f){case"error":throw a;case"warn":u>0&&console.warn(a);break;case"info":u>2&&console.info(a);break;default:u>1&&console.log(a);break}}function O(a){h(a,"error")}function x(a){h(a,"warn")}function M(a){h(a,"log")}function C(a){h(a,"info")}return{get options(){return s},get THREE(){return i},get scene(){return r.scene},set scene(a){r.scene=a},get camera(){return r.camera},set camera(a){r.camera=a},get controls(){return r.controls},set controls(a){r.controls=a},get renderer(){return r.renderer},get draggables(){return r.draggables},set draggables(a){r.draggables=a},preloadImages:n,initSize:l,create:m,error:O,warn:x,log:M,info:C,init:e,run:t}}();var b=function(){function s(r,n){let e={draggable:t=>i(r,t)};for(let t in n){if(!e[t]){o.warn("The userData \xBB"+t+"\xAB can not handled by app.");return}return e[t](t)}}function i(r,n){n&&o.draggables.push(r)}return{handle:s}}(o);var p=function(){function s(e){let t=i(e);return o.scene.add(t),t}function i(e){let t=o.THREE,l=Array.isArray(e.args)?e.args:[],c=new t[e.type](...l);return c=r(c,e),c}function r(e,t){return t.properties&&(e=n(e,t.properties)),t.methods&&(e=d.applyMethods(e,t.methods)),e}function n(e,t){let l=o.THREE;if(!t||typeof t!="object")return e;for(let c in t)if(t[c]instanceof Object)if("copy"in e[c]){if("toVector3"in e[c]&&"setFromVector3"in e[c]){let g=new l.Vector3;g.setFromEuler(e[c]);let h={...g,...t[c]};e[c].setFromVector3(h)}let m={...e[c],...t[c]};e[c].copy(m)}else c==="userData"&&b.handle(e,t[c]),e[c]=n(e[c],t[c]);else d.isThreeColorValue(c)?e[c]=new l.Color(t[c]):e[c]=t[c];return e}return{add:s,create:i,change:r}}(o);var H=function(){function s(){let n=o.options;o.camera=r(n.camera),o.scene=i(n.scene),o.initSize()}function i(n){return p.create(n)}function r(n){let e=p.create(n);return e.updateProjectionMatrix(),e}return{init:s}}(o);var S=function(){function s(r,n){o.controls[r.name]=i(r,n)}function i(r,n,e=null){let t=null;return r.name==="DragControls"?t=new r(o.draggables,o.camera,o.renderer.domElement):t=new r(o.camera,o.renderer.domElement),t=p.change(t,n),t}return{init:s}}(o);var P=function(){function s(e){return p.create(e)}function i(e,t){return e=p.change(e,t),e}function r(e){if(typeof e=="object"&&e.type)return n(e);let t=[];return Array.isArray(e)&&e.forEach(l=>{let c=n(l);t.push(c)}),t}function n(e){let t=s(e);return o.scene.add(t),t}return{add:r,create:s,change:i}}(o);var v=function(){function s(n){n||(n={type:"MeshPhongMaterial",args:[{color:16777215}]},o.info("No options for material given, using default MeshPhongMaterial in white"));let e=o.create(n);return e=i(e,n),e}function i(n,e){return e.properties&&(n=r(n,e.properties)),e.methods&&(n=d.applyMethods(n,e.methods)),e.textures&&(e.textures.forEach(t=>{let l=t.type||"TextureLoader",c=o.create({type:l}),m=t.map,g=c.load(t.url);n[m]=g,t.properties&&(n[m]=r(n[m],t.properties)),t.methods&&(n[m]=d.applyMethods(n,t.methods))}),n.needsUpdate=!0),n}function r(n,e){let t=o.THREE;if(!e||typeof e!="object")return n;for(let l in e)e[l]instanceof Object?n[l]={...e[l]}:d.isThreeColorValue(l)?n[l]=new t.Color(e[l]):n[l]=e[l];return n}return{create:s,change:i}}(o);var A=function(){function s(i){i||(i={type:"BoxGeometry",args:[1,1,1]},o.info("No options for geometry given, using default BoxGeometry 1x1x1"));let r=o.create(i);return r=d.merge(r,i.properties),r}return{create:s}}(o);var L=function(){function s(e){let t=o.THREE,l=v.create(e.material),c=A.create(e.geometry),m=new t.Mesh(c,l);return m=n(m,e),m}function i(e){if(typeof e=="object"&&e.geometry)return r(e);let t=[];return Array.isArray(e)&&e.forEach(l=>{let c=r(l);t.push(c)}),t}function r(e){let t=s(e);return o.scene.add(t),t}function n(e,t){return e=p.change(e,t),t.material&&v.change(e.material,t.material),e}return{add:i,create:s,change:n}}(o);console.log("klee.js: "+R);export{o as App,S as Controls,A as Geometry,L as Item,R as KLEEVERSION,P as Light,v as Material,p as Object3d,H as Scene};
//# sourceMappingURL=klee.min.js.map
