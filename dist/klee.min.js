var C="0.1.2";function A(l){return{debugLevel:0,responsive:!0,renderer:{type:"WebGLRenderer",args:[{antialias:!0,preserveDrawingBuffer:!0,alpha:!0}],domElement:"body",clearColor:"#000000",opacity:1,properties:{shadowMap:{enabled:!0,type:l.PCFSoftShadowMap}}},camera:{type:"PerspectiveCamera",methods:{lookAt:[0,0,0]},properties:{position:{x:-1,y:2,z:5},name:"camera-1",fov:35,aspect:window.innerWidth/window.innerHeight,near:1,far:300}},scene:{type:"Scene",properties:{name:"scene-1",position:{x:0,y:0,z:0}}}}}var d=class{static merge(i,r){if(!r||typeof r!="object")return i;for(let t of Object.keys(r))r[t]instanceof Object&&Object.assign(r[t],this.merge(i[t],r[t]));return Object.assign(i||{},r),i}static isThreeColorValue(i){return["color","specular","emissive","diffuse","background","sheen"].includes(i)}static applyMethods(i,r){r=r||{};for(let t in r){let e=Array.isArray(r[t])?r[t]:[];t in i?i[t](...e):console.log("Applied object has no method: "+t)}return i}};var n=function(){let l={},i,r={canvas:null,camera:null,renderer:null,scene:null,mouse:null,raycaster:null,controls:{OrbitControls:null},draggables:[],draggableObject:null,actions:{isDragging:!1}};async function t(o=[]){if(!Array.isArray(o)||o.length<=0){b("Images could not be preloaded. Wrong or no argument given.");return}i.Cache.enabled=!0;let f=new i.ImageLoader;return await Promise.all(o.map(async m=>await f.loadAsync(m)))}function e(o,f={}){(!o||!o.REVISION)&&x("THREE is not inserted"),i={...o},(!f||typeof f!="object")&&(f={},b("Options are set to default values")),l={...d.merge(A(i),f)},r.renderer=s(l.renderer)}function a(o){r.renderer.render(r.scene,r.camera),r.controls.OrbitControls&&(r.controls.OrbitControls.enableDamping||r.controls.OrbitControls.autoRotate)&&r.controls.OrbitControls.update(),typeof o=="function"&&o(),requestAnimationFrame(()=>a(o))}function c(){let o=l.responsive||!1,f=r.camera.fov,m=r.canvas.clientWidth,E=r.canvas.clientWidth,h=r.canvas.clientHeight;r.renderer.setSize(E,h),r.camera.aspect=E/h,r.camera.updateProjectionMatrix(),o!==!1&&window.addEventListener("resize",()=>{let w=window.innerWidth;E=r.canvas.clientWidth,h=r.canvas.clientHeight,w!==E&&(r.renderer.setSize(w,h),r.camera.aspect=w/h,r.camera.fov=f*m/w,r.camera.updateProjectionMatrix())})}function s(o){let f=document.querySelector(o.domElement);f instanceof HTMLCanvasElement&&(o.args.canvas=f,r.canvas=f);let m=u(o);return m=p(m,o.properties),m.setClearColor(new i.Color(o.clearColor),o.opacity),m.setPixelRatio(window.devicePixelRatio),r.canvas||(f.appendChild(m.domElement),r.canvas=m.domElement),m.setSize(r.canvas.clientWidth,r.canvas.clientHeight),m}function u(o){let f=Array.isArray(o.args)?o.args:[];return new i[o.type](...f)}function p(o,f){return d.merge(o,f)}function y(o,f){let m=l.debugLevel!==void 0?l.debugLevel:3;switch(f){case"error":throw o;case"warn":m>0&&console.warn(o);break;case"info":m>2&&console.info(o);break;default:m>1&&console.log(o);break}}function x(o){y(o,"error")}function b(o){y(o,"warn")}function M(o){y(o,"log")}function T(o){y(o,"info")}return{get canvas(){return r.canvas},get options(){return l},get THREE(){return i},get scene(){return r.scene},set scene(o){r.scene=o},get camera(){return r.camera},set camera(o){r.camera=o},get controls(){return r.controls},get renderer(){return r.renderer},get draggables(){return r.draggables},get draggableObject(){return r.draggableObject},set draggableObject(o){r.draggableObject=o},get mouse(){return r.mouse},set mouse(o){r.mouse=o},get raycaster(){return r.raycaster},set raycaster(o){r.raycaster=o},get actions(){return r.actions},preloadImages:t,initSize:c,create:u,error:x,warn:b,log:M,info:T,init:e,run:a}}();var R=function(){function l(t,e){let a={draggable:c=>i(t,c),raycasterPlane:c=>r(t,c)};for(let c in e)a[c]||n.warn("The userData \xBB"+c+"\xAB can not be handled by app."),a[c](c)}function i(t,e){e&&n.draggables.push(t)}function r(t,e){e&&(n.raycasterPlane=t)}return{handle:l}}(n);var g=function(){function l(e){let a=i(e);return n.scene.add(a),a}function i(e){let a=n.THREE,c=Array.isArray(e.args)?e.args:[],s=new a[e.type](...c);return s=r(s,e),s}function r(e,a){return a.properties&&(e=t(e,a.properties)),a.methods&&(e=d.applyMethods(e,a.methods)),e}function t(e,a){let c=n.THREE;if(!a||typeof a!="object")return e;for(let s in a)if(a[s]instanceof Object)if("copy"in e[s]){if("toVector3"in e[s]&&"setFromVector3"in e[s]){let p=new c.Vector3;p.setFromEuler(e[s]);let y={...p,...a[s]};e[s].setFromVector3(y)}let u={...e[s],...a[s]};e[s].copy(u)}else s==="userData"&&R.handle(e,a[s]),e[s]=t(e[s],a[s]);else d.isThreeColorValue(s)?e[s]=new c.Color(a[s]):e[s]=a[s];return e}return{add:l,create:i,change:r}}(n);var P=function(){function l(){let t=n.options;n.camera=r(t.camera),n.scene=i(t.scene),n.initSize()}function i(t){return g.create(t)}function r(t){let e=g.create(t);return e.updateProjectionMatrix(),e}return{init:l}}(n);var H=function(){function l(r,t){n.controls[r.name]=i(r,t)}function i(r,t){let e=new r(n.camera,n.renderer.domElement);return e=g.change(e,t),e}return{init:l}}(n);var V=function(){function l(e){return g.create(e)}function i(e,a){return e=g.change(e,a),e}function r(e){if(typeof e=="object"&&e.type)return t(e);let a=[];return Array.isArray(e)&&e.forEach(c=>{let s=t(c);a.push(s)}),a}function t(e){let a=l(e);return n.scene.add(a),a}return{add:r,create:l,change:i}}(n);var v=function(){function l(t){t||(t={type:"MeshPhongMaterial",args:[{color:16777215}]},n.info("No options for material given, using default MeshPhongMaterial in white"));let e=n.create(t);return e=i(e,t),e}function i(t,e){return e.properties&&(t=r(t,e.properties)),e.methods&&(t=d.applyMethods(t,e.methods)),e.textures&&(e.textures.forEach(a=>{let c=a.type||"TextureLoader",s=n.create({type:c}),u=a.map,p=s.load(a.url);t[u]=p,a.properties&&(t[u]=r(t[u],a.properties)),a.methods&&(t[u]=d.applyMethods(t,a.methods))}),t.needsUpdate=!0),t}function r(t,e){let a=n.THREE;if(!e||typeof e!="object")return t;for(let c in e)e[c]instanceof Object?t[c]={...e[c]}:d.isThreeColorValue(c)?t[c]=new a.Color(e[c]):t[c]=e[c];return t}return{create:l,change:i}}(n);var O=function(){function l(i){i||(i={type:"BoxGeometry",args:[1,1,1]},n.info("No options for geometry given, using default BoxGeometry 1x1x1"));let r=n.create(i);return r=d.merge(r,i.properties),r}return{create:l}}(n);var S=function(){function l(e){let a=n.THREE,c=v.create(e.material),s=O.create(e.geometry),u=new a.Mesh(s,c);return u=t(u,e),u}function i(e){if(typeof e=="object"&&e.geometry)return r(e);let a=[];return Array.isArray(e)&&e.forEach(c=>{let s=r(c);a.push(s)}),a}function r(e){let a=l(e);return n.scene.add(a),a}function t(e,a){return e=g.change(e,a),a.material&&v.change(e.material,a.material),e}return{add:i,create:l,change:t}}(n);var L=function(){let l=null,i=null,r=null,t=null;function e(){let u=n.THREE;l=new u.Plane,i=new u.Vector3(0,1,0),r=new u.Vector3,t=new u.Vector3,n.raycaster=n.raycaster??new u.Raycaster,n.mouse=n.mouse??{},document.addEventListener("mousemove",p=>{s(p)}),document.addEventListener("mousedown",p=>{a(p)}),document.addEventListener("mouseup",p=>{c(p)})}function a(){let u=n.raycaster.intersectObjects(n.draggables);u.length<=0||(r.copy(u[0].point),l.setFromNormalAndCoplanarPoint(i,r),t.subVectors(u[0].object.position,u[0].point),n.controls.OrbitControls.enabled=!1,n.actions.isDragging=!0,n.draggableObject=u[0].object,n.canvas.style.cursor="grab")}function c(){n.controls.OrbitControls.enabled=!0,n.actions.isDragging=!1,n.draggableObject=null,n.canvas.style.cursor="auto"}function s(u){n.mouse.x=u.clientX/window.innerWidth*2-1,n.mouse.y=-(u.clientY/window.innerHeight)*2+1,n.raycaster.setFromCamera(n.mouse,n.camera),n.actions.isDragging&&(n.raycaster.ray.intersectPlane(l,r),n.draggableObject.position.addVectors(r,t))}return{init:e}}();console.log("klee.js: "+C);export{n as App,H as Controls,L as Events,O as Geometry,S as Item,C as KLEEVERSION,V as Light,v as Material,g as Object3d,P as Scene};
//# sourceMappingURL=klee.min.js.map
