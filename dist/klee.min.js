var C="0.2.0";function R(l){return{debugLevel:0,responsive:!0,renderer:{type:"WebGLRenderer",args:[{antialias:!0,preserveDrawingBuffer:!0,alpha:!0}],domElement:"body",clearColor:"#000000",opacity:1,properties:{shadowMap:{enabled:!0,type:l.PCFSoftShadowMap}}},camera:{type:"PerspectiveCamera",methods:{lookAt:[0,0,0]},properties:{position:{x:-1,y:2,z:5},name:"camera-1",fov:35,aspect:window.innerWidth/window.innerHeight,near:1,far:300}},scene:{type:"Scene",properties:{name:"scene-1",position:{x:0,y:0,z:0}}}}}var d=class{static merge(i,r){if(!r||typeof r!="object")return i;for(let t of Object.keys(r))r[t]instanceof Object&&Object.assign(r[t],this.merge(i[t],r[t]));return Object.assign(i||{},r),i}static isThreeColorValue(i){return["color","specular","emissive","diffuse","background","sheen"].includes(i)}static applyMethods(i,r){r=r||{};for(let t in r){let e=Array.isArray(r[t])?r[t]:[];t in i?i[t](...e):console.log("Applied object has no method: "+t)}return i}};var o=function(){let l={},i,r={canvas:null,camera:null,renderer:null,scene:null,mouse:null,raycaster:null,controls:{OrbitControls:null},draggables:[],actions:{isDragging:!1}};async function t(a=[]){if(!Array.isArray(a)||a.length<=0){b("Images could not be preloaded. Wrong or no argument given.");return}i.Cache.enabled=!0;let u=new i.ImageLoader;return await Promise.all(a.map(async f=>await u.loadAsync(f)))}function e(a,u={}){(!a||!a.REVISION)&&h("THREE is not inserted"),i={...a},(!u||typeof u!="object")&&(u={},b("Options are set to default values")),l={...d.merge(R(i),u)},r.renderer=s(l.renderer)}function n(a){r.renderer.render(r.scene,r.camera),r.controls.OrbitControls&&(r.controls.OrbitControls.enableDamping||r.controls.OrbitControls.autoRotate)&&r.controls.OrbitControls.update(),typeof a=="function"&&a(),requestAnimationFrame(()=>n(a))}function c(){let a=l.responsive||!1,u=r.camera.fov,f=r.canvas.clientWidth,v=r.canvas.clientWidth,w=r.canvas.clientHeight;r.renderer.setSize(v,w),r.camera.aspect=v/w,r.camera.updateProjectionMatrix(),a!==!1&&window.addEventListener("resize",()=>{let x=window.innerWidth;v=r.canvas.clientWidth,w=r.canvas.clientHeight,x!==v&&(r.renderer.setSize(x,w),r.camera.aspect=x/w,r.camera.fov=u*f/x,r.camera.updateProjectionMatrix())})}function s(a){let u=document.querySelector(a.domElement);u instanceof HTMLCanvasElement&&(a.args.canvas=u,r.canvas=u);let f=m(a);return f=y(f,a.properties),f.setClearColor(new i.Color(a.clearColor),a.opacity),f.setPixelRatio(window.devicePixelRatio),r.canvas||(u.appendChild(f.domElement),r.canvas=f.domElement),f.setSize(r.canvas.clientWidth,r.canvas.clientHeight),f}function m(a){let u=Array.isArray(a.args)?a.args:[];return new i[a.type](...u)}function y(a,u){return d.merge(a,u)}function p(a,u){let f=l.debugLevel!==void 0?l.debugLevel:3;switch(u){case"error":throw a;case"warn":f>0&&console.warn(a);break;case"info":f>2&&console.info(a);break;default:f>1&&console.log(a);break}}function h(a){p(a,"error")}function b(a){p(a,"warn")}function M(a){p(a,"log")}function H(a){p(a,"info")}return{get canvas(){return r.canvas},get options(){return l},get THREE(){return i},get scene(){return r.scene},set scene(a){r.scene=a},get camera(){return r.camera},set camera(a){r.camera=a},get controls(){return r.controls},get renderer(){return r.renderer},get draggables(){return r.draggables},get mouse(){return r.mouse},set mouse(a){r.mouse=a},get raycaster(){return r.raycaster},set raycaster(a){r.raycaster=a},get actions(){return r.actions},preloadImages:t,initSize:c,create:m,error:h,warn:b,log:M,info:H,init:e,run:n}}();var T=function(){function l(t,e){let n={draggable:c=>i(t,c),raycasterPlane:c=>r(t,c)};for(let c in e)n[c]||o.warn("The userData \xBB"+c+"\xAB can not be handled by app."),n[c](c)}function i(t,e){e&&o.draggables.push(t)}function r(t,e){e&&(o.raycasterPlane=t)}return{handle:l}}(o);var g=function(){function l(e){let n=i(e);return o.scene.add(n),n}function i(e){let n=o.THREE,c=Array.isArray(e.args)?e.args:[],s=new n[e.type](...c);return s=r(s,e),s}function r(e,n){return n.properties&&(e=t(e,n.properties)),n.methods&&(e=d.applyMethods(e,n.methods)),e}function t(e,n){let c=o.THREE;if(!n||typeof n!="object")return e;for(let s in n)if(n[s]instanceof Object)if("copy"in e[s]){if("toVector3"in e[s]&&"setFromVector3"in e[s]){let y=new c.Vector3;y.setFromEuler(e[s]);let p={...y,...n[s]};e[s].setFromVector3(p)}let m={...e[s],...n[s]};e[s].copy(m)}else s==="userData"&&T.handle(e,n[s]),e[s]=t(e[s],n[s]);else d.isThreeColorValue(s)?e[s]=new c.Color(n[s]):e[s]=n[s];return e}return{add:l,create:i,change:r}}(o);var P=function(){function l(){let t=o.options;o.camera=r(t.camera),o.scene=i(t.scene),o.initSize()}function i(t){return g.create(t)}function r(t){let e=g.create(t);return e.updateProjectionMatrix(),e}return{init:l}}(o);var D=function(){function l(r,t){o.controls[r.name]=i(r,t)}function i(r,t){let e=new r(o.camera,o.renderer.domElement);return e=g.change(e,t),e}return{init:l}}(o);var V=function(){function l(e){return g.create(e)}function i(e,n){return e=g.change(e,n),e}function r(e){if(typeof e=="object"&&e.type)return t(e);let n=[];return Array.isArray(e)&&e.forEach(c=>{let s=t(c);n.push(s)}),n}function t(e){let n=l(e);return o.scene.add(n),n}return{add:r,create:l,change:i}}(o);var O=function(){function l(t){t||(t={type:"MeshPhongMaterial",args:[{color:16777215}]},o.info("No options for material given, using default MeshPhongMaterial in white"));let e=o.create(t);return e=i(e,t),e}function i(t,e){return e.properties&&(t=r(t,e.properties)),e.methods&&(t=d.applyMethods(t,e.methods)),e.textures&&(e.textures.forEach(n=>{let c=n.type||"TextureLoader",s=o.create({type:c}),m=n.map,y=s.load(n.url);t[m]=y,n.properties&&(t[m]=r(t[m],n.properties)),n.methods&&(t[m]=d.applyMethods(t,n.methods))}),t.needsUpdate=!0),t}function r(t,e){let n=o.THREE;if(!e||typeof e!="object")return t;for(let c in e)e[c]instanceof Object?t[c]={...e[c]}:d.isThreeColorValue(c)?t[c]=new n.Color(e[c]):t[c]=e[c];return t}return{create:l,change:i}}(o);var A=function(){function l(i){i||(i={type:"BoxGeometry",args:[1,1,1]},o.info("No options for geometry given, using default BoxGeometry 1x1x1"));let r=o.create(i);return r=d.merge(r,i.properties),r}return{create:l}}(o);var S=function(){function l(e){let n=o.THREE,c=O.create(e.material),s=A.create(e.geometry),m=new n.Mesh(s,c);return m=t(m,e),m}function i(e){if(typeof e=="object"&&e.geometry)return r(e);let n=[];return Array.isArray(e)&&e.forEach(c=>{let s=r(c);n.push(s)}),n}function r(e){let n=l(e);return o.scene.add(n),n}function t(e,n){return e=g.change(e,n),n.material&&O.change(e.material,n.material),e}return{add:i,create:l,change:t}}(o);var E=function(){let l=null,i=null,r=null,t=null,e=null,n=[];function c(p){let h=o.THREE;l=new h.Plane,i=new h.Vector3(0,1,0),r=new h.Vector3,t=new h.Vector3,n=p}function s(){let p=o.raycaster.intersectObjects(n);p.length<=0||(r.copy(p[0].point),l.setFromNormalAndCoplanarPoint(i,r),t.subVectors(p[0].object.position,p[0].point),e=p[0].object,o.controls.OrbitControls.enabled=!1,o.actions.isDragging=!0,o.canvas.style.cursor="grab")}function m(){e=null,o.controls.OrbitControls.enabled=!0,o.actions.isDragging=!1,o.canvas.style.cursor="auto"}function y(){o.actions.isDragging&&(e.position.addVectors(r,t),o.raycaster.ray.intersectPlane(l,r))}return{init:c,start:s,drag:y,stop:m}}();var L=function(){function l(){let e=o.THREE;o.raycaster=o.raycaster??new e.Raycaster,o.mouse=o.mouse??{},E.init(o.draggables),document.addEventListener("mousemove",n=>{t(n)}),document.addEventListener("mousedown",n=>{i(n)}),document.addEventListener("mouseup",n=>{r(n)})}function i(){E.start()}function r(){E.stop()}function t(e){o.mouse.x=e.clientX/window.innerWidth*2-1,o.mouse.y=-(e.clientY/window.innerHeight)*2+1,o.raycaster.setFromCamera(o.mouse,o.camera),E.drag()}return{init:l}}();console.log("klee.js: "+C);export{o as App,D as Controls,E as Dragging,L as Events,A as Geometry,S as Item,C as KLEEVERSION,V as Light,O as Material,g as Object3d,P as Scene};
//# sourceMappingURL=klee.min.js.map
