var M="0.2.0";function H(l){return{debugLevel:0,responsive:!0,renderer:{type:"WebGLRenderer",args:[{antialias:!0,preserveDrawingBuffer:!0,alpha:!0}],domElement:"body",clearColor:"#000000",opacity:1,properties:{shadowMap:{enabled:!0,type:l.PCFSoftShadowMap}}},camera:{type:"PerspectiveCamera",methods:{lookAt:[0,0,0]},properties:{position:{x:-1,y:2,z:5},name:"camera-1",fov:35,aspect:window.innerWidth/window.innerHeight,near:1,far:300}},scene:{type:"Scene",properties:{name:"scene-1",position:{x:0,y:0,z:0}}}}}var y=class{static merge(c,r){if(!r||typeof r!="object")return c;for(let n of Object.keys(r))r[n]instanceof Object&&Object.assign(r[n],this.merge(c[n],r[n]));return Object.assign(c||{},r),c}static isThreeColorValue(c){return["color","specular","emissive","diffuse","background","sheen"].includes(c)}static applyMethods(c,r){r=r||{};for(let n in r){let e=Array.isArray(r[n])?r[n]:[];n in c?c[n](...e):console.log("Applied object has no method: "+n)}return c}};var t=function(){let l={},c,r={canvas:null,camera:null,renderer:null,scene:null,mouse:null,raycaster:null,manager:null,controls:{OrbitControls:null},draggables:[],actions:{isDragging:!1}};function n(s,d={}){(!s||!s.REVISION)&&u("THREE is not inserted"),c={...s},(!d||typeof d!="object")&&(d={},g("Options are set to default values")),l={...y.merge(H(c),d)},r.renderer=a(l.renderer),r.manager=new c.LoadingManager}function e(s){r.renderer.render(r.scene,r.camera),r.controls.OrbitControls&&(r.controls.OrbitControls.enableDamping||r.controls.OrbitControls.autoRotate)&&r.controls.OrbitControls.update(),typeof s=="function"&&s(),requestAnimationFrame(()=>e(s))}function i(){let s=l.responsive||!1,d=r.camera.fov,p=r.canvas.clientWidth,x=r.canvas.clientWidth,w=r.canvas.clientHeight;r.renderer.setSize(x,w),r.camera.aspect=x/w,r.camera.updateProjectionMatrix(),s!==!1&&window.addEventListener("resize",()=>{let v=window.innerWidth;x=r.canvas.clientWidth,w=r.canvas.clientHeight,v!==x&&(r.renderer.setSize(v,w),r.camera.aspect=v/w,r.camera.fov=d*p/v,r.camera.updateProjectionMatrix())})}function a(s){let d=document.querySelector(s.domElement);d instanceof HTMLCanvasElement&&(s.args.canvas=d,r.canvas=d);let p=o(s);return p=f(p,s.properties),p.setClearColor(new c.Color(s.clearColor),s.opacity),p.setPixelRatio(window.devicePixelRatio),r.canvas||(d.appendChild(p.domElement),r.canvas=p.domElement),p.setSize(r.canvas.clientWidth,r.canvas.clientHeight),p}function o(s){let d=Array.isArray(s.args)?s.args:[];return new c[s.type](...d)}function f(s,d){return y.merge(s,d)}function m(s,d){let p=l.debugLevel!==void 0?l.debugLevel:3;switch(d){case"error":throw s;case"warn":p>0&&console.warn(s);break;case"info":p>2&&console.info(s);break;default:p>1&&console.log(s);break}}function u(s){m(s,"error")}function g(s){m(s,"warn")}function O(s){m(s,"log")}function T(s){m(s,"info")}return{get canvas(){return r.canvas},get options(){return l},get THREE(){return c},get scene(){return r.scene},set scene(s){r.scene=s},get camera(){return r.camera},set camera(s){r.camera=s},get controls(){return r.controls},get renderer(){return r.renderer},get manager(){return r.manager},get draggables(){return r.draggables},get mouse(){return r.mouse},set mouse(s){r.mouse=s},get raycaster(){return r.raycaster},set raycaster(s){r.raycaster=s},get actions(){return r.actions},initSize:i,create:o,error:u,warn:g,log:O,info:T,init:n,run:e}}();var C=function(){function l(n,e){let i={draggable:a=>c(n,a),raycasterPlane:a=>r(n,a)};for(let a in e)i[a]||t.warn("The userData \xBB"+a+"\xAB can not be handled by app."),i[a](a)}function c(n,e){e&&t.draggables.push(n)}function r(n,e){e&&(t.raycasterPlane=n)}return{handle:l}}(t);var h=function(){function l(e){let i=c(e);return t.scene.add(i),i}function c(e){let i=t.THREE,a=Array.isArray(e.args)?e.args:[],o=new i[e.type](...a);return o=r(o,e),o}function r(e,i){return i.properties&&(e=n(e,i.properties)),i.methods&&(e=y.applyMethods(e,i.methods)),e}function n(e,i){let a=t.THREE;if(!i||typeof i!="object")return e;for(let o in i)if(i[o]instanceof Object)if("copy"in e[o]){if("toVector3"in e[o]&&"setFromVector3"in e[o]){let m=new a.Vector3;m.setFromEuler(e[o]);let u={...m,...i[o]};e[o].setFromVector3(u)}let f={...e[o],...i[o]};e[o].copy(f)}else o==="userData"&&C.handle(e,i[o]),e[o]=n(e[o],i[o]);else y.isThreeColorValue(o)?e[o]=new a.Color(i[o]):e[o]=i[o];return e}return{add:l,create:c,change:r}}(t);var S=function(){function l(){let n=t.options;t.camera=r(n.camera),t.scene=c(n.scene),t.initSize()}function c(n){return h.create(n)}function r(n){let e=h.create(n);return e.updateProjectionMatrix(),e}return{init:l}}(t);var L=function(){function l(r,n){t.controls[r.name]=c(r,n)}function c(r,n){let e=new r(t.camera,t.renderer.domElement);return e=h.change(e,n),e}return{init:l}}(t);var b=function(){let l=t.THREE,c={};function r(e){c[e.name]=new e(t.manager)}async function n(e){return await c[e.loader].loadAsync(e.url)}return{init:r,load:n}}(t);var P=function(){function l(e){return h.create(e)}function c(e,i){return e=h.change(e,i),e}function r(e){if(typeof e=="object"&&e.type)return n(e);let i=[];return Array.isArray(e)&&e.forEach(a=>{let o=n(a);i.push(o)}),i}function n(e){let i=l(e);return t.scene.add(i),i}return{add:r,create:l,change:c}}(t);var R=function(){function l(n){n||(n={type:"MeshPhongMaterial",args:[{color:16777215}]},t.info("No options for material given, using default MeshPhongMaterial in white"));let e=t.create(n);return e=c(e,n),e}function c(n,e){let i=t.THREE;return e.properties&&(n=r(n,e.properties)),e.methods&&(n=y.applyMethods(n,e.methods)),e.textures&&(e.textures.forEach(async a=>{let o=a.loader||"TextureLoader",f=new i[o](t.manager),m=a.map,u=await f.loadAsync(a.url);n[m]=u,a.properties&&(n[m]=r(n[m],a.properties)),a.methods&&(n[m]=y.applyMethods(n,a.methods))}),n.needsUpdate=!0),n}function r(n,e){let i=t.THREE;if(!e||typeof e!="object")return n;for(let a in e)e[a]instanceof Object?n[a]={...e[a]}:y.isThreeColorValue(a)?n[a]=new i.Color(e[a]):n[a]=e[a];return n}return{create:l,change:c}}(t);var A=function(){function l(c){c||(c={type:"BoxGeometry",args:[1,1,1]},t.info("No options for geometry given, using default BoxGeometry 1x1x1"));let r=t.create(c);return r=y.merge(r,c.properties),r}return{create:l}}(t);var D=function(){function l(a){let o=t.THREE,f=R.create(a.material),m=A.create(a.geometry),u=new o.Mesh(m,f);return u=i(u,a),u}function c(a){if(typeof a=="object"){if(a.loader)return r(a);if(a.geometry)return e(a)}let o=[];return Array.isArray(a)&&a.forEach(f=>{let m=c(f);o.push(m)}),o}async function r(a){let o=await b.load(a);if(o.scene){let f=n(o.scene,a);return f=i(f,a),f.receiveShadow=!1,f.castShadow=!1,t.scene.add(f),f}else return o=i(o,a),t.scene.add(o),o}function n(a,o){let f=t.THREE,m=.001,u=new f.Box3().setFromObject(a),g={x:u.max.x-u.min.x+m,y:u.max.y-u.min.y+m,z:u.max.z-u.min.z+m},O=new f.BoxGeometry(g.x,g.y,g.z);o.color=16777215,o.transparent=!0,o.opacity=0;let T=new f.MeshBasicMaterial(o),s=new f.Mesh(O,T);return a.position.y=g.y/-2,s.position.y=g.y,s.renderOrder=1,a.children.map(d=>{d.receiveShadow=o.properties.receiveShadow||!1,d.castShadow=o.properties.castShadow||!1}),s.add(a),s}function e(a){let o=l(a);return t.scene.add(o),o}function i(a,o){return a=h.change(a,o),o.material&&R.change(a.material,o.material),a}return{add:c,create:l,change:i}}(t);var E=function(){let l=null,c=null,r=null,n=null,e=null,i=[];function a(u){let g=t.THREE;l=new g.Plane,c=new g.Vector3(0,1,0),r=new g.Vector3,n=new g.Vector3,i=u}function o(){let u=t.raycaster.intersectObjects(i);u.length<=0||(r.copy(u[0].point),l.setFromNormalAndCoplanarPoint(c,r),n.subVectors(u[0].object.position,u[0].point),e=u[0].object,t.controls.OrbitControls.enabled=!1,t.actions.isDragging=!0,t.canvas.style.cursor="grab")}function f(){e=null,t.controls.OrbitControls.enabled=!0,t.actions.isDragging=!1,t.canvas.style.cursor="auto"}function m(){t.actions.isDragging&&(e.position.addVectors(r,n),t.raycaster.ray.intersectPlane(l,r))}return{init:a,start:o,drag:m,stop:f}}();var V=function(){function l(){let e=t.THREE;t.raycaster=t.raycaster??new e.Raycaster,t.mouse=t.mouse??{},E.init(t.draggables),document.addEventListener("mousemove",i=>{n(i)}),document.addEventListener("mousedown",i=>{c(i)}),document.addEventListener("mouseup",i=>{r(i)})}function c(){E.start()}function r(){E.stop()}function n(e){t.mouse.x=e.clientX/window.innerWidth*2-1,t.mouse.y=-(e.clientY/window.innerHeight)*2+1,t.raycaster.setFromCamera(t.mouse,t.camera),E.drag()}return{init:l}}();console.log("klee.js: "+M);export{t as App,L as Controls,E as Dragging,V as Events,A as Geometry,D as Item,M as KLEEVERSION,P as Light,b as Loaders,R as Material,h as Object3d,S as Scene};
//# sourceMappingURL=klee.min.js.map
