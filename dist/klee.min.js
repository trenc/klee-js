var T="0.2.0";function b(l){return{debugLevel:0,responsive:!0,renderer:{type:"WebGLRenderer",args:[{antialias:!0,preserveDrawingBuffer:!0,alpha:!0}],domElement:"body",clearColor:"#000000",opacity:1,properties:{shadowMap:{enabled:!0,type:l.PCFSoftShadowMap}}},camera:{type:"PerspectiveCamera",methods:{lookAt:[0,0,0]},properties:{position:{x:-1,y:2,z:5},name:"camera-1",fov:35,aspect:window.innerWidth/window.innerHeight,near:1,far:300}},scene:{type:"Scene",properties:{name:"scene-1",position:{x:0,y:0,z:0}}}}}var p=class{static merge(i,r){if(!r||typeof r!="object")return i;for(let t of Object.keys(r))r[t]instanceof Object&&Object.assign(r[t],this.merge(i[t],r[t]));return Object.assign(i||{},r),i}static isThreeColorValue(i){return["color","specular","emissive","diffuse","background","sheen"].includes(i)}static applyMethods(i,r){r=r||{};for(let t in r){let e=Array.isArray(r[t])?r[t]:[];t in i?i[t](...e):console.log("Applied object has no method: "+t)}return i}};var o=function(){let l={},i,r={canvas:null,camera:null,renderer:null,scene:null,mouse:null,raycaster:null,manager:null,controls:{OrbitControls:null},draggables:[],actions:{isDragging:!1}};function t(s,f={}){(!s||!s.REVISION)&&d("THREE is not inserted"),i={...s},(!f||typeof f!="object")&&(f={},h("Options are set to default values")),l={...p.merge(b(i),f)},r.renderer=a(l.renderer),r.manager=new i.LoadingManager}function e(s){r.renderer.render(r.scene,r.camera),r.controls.OrbitControls&&(r.controls.OrbitControls.enableDamping||r.controls.OrbitControls.autoRotate)&&r.controls.OrbitControls.update(),typeof s=="function"&&s(),requestAnimationFrame(()=>e(s))}function n(){let s=l.responsive||!1,f=r.camera.fov,m=r.canvas.clientWidth,v=r.canvas.clientWidth,w=r.canvas.clientHeight;r.renderer.setSize(v,w),r.camera.aspect=v/w,r.camera.updateProjectionMatrix(),s!==!1&&window.addEventListener("resize",()=>{let x=window.innerWidth;v=r.canvas.clientWidth,w=r.canvas.clientHeight,x!==v&&(r.renderer.setSize(x,w),r.camera.aspect=x/w,r.camera.fov=f*m/x,r.camera.updateProjectionMatrix())})}function a(s){let f=document.querySelector(s.domElement);f instanceof HTMLCanvasElement&&(s.args.canvas=f,r.canvas=f);let m=c(s);return m=g(m,s.properties),m.setClearColor(new i.Color(s.clearColor),s.opacity),m.setPixelRatio(window.devicePixelRatio),r.canvas||(f.appendChild(m.domElement),r.canvas=m.domElement),m.setSize(r.canvas.clientWidth,r.canvas.clientHeight),m}function c(s){let f=Array.isArray(s.args)?s.args:[];return new i[s.type](...f)}function g(s,f){return p.merge(s,f)}function u(s,f){let m=l.debugLevel!==void 0?l.debugLevel:3;switch(f){case"error":throw s;case"warn":m>0&&console.warn(s);break;case"info":m>2&&console.info(s);break;default:m>1&&console.log(s);break}}function d(s){u(s,"error")}function h(s){u(s,"warn")}function H(s){u(s,"log")}function M(s){u(s,"info")}return{get canvas(){return r.canvas},get options(){return l},get THREE(){return i},get scene(){return r.scene},set scene(s){r.scene=s},get camera(){return r.camera},set camera(s){r.camera=s},get controls(){return r.controls},get renderer(){return r.renderer},get manager(){return r.manager},get draggables(){return r.draggables},get mouse(){return r.mouse},set mouse(s){r.mouse=s},get raycaster(){return r.raycaster},set raycaster(s){r.raycaster=s},get actions(){return r.actions},initSize:n,create:c,error:d,warn:h,log:H,info:M,init:t,run:e}}();var C=function(){function l(t,e){let n={draggable:a=>i(t,a),raycasterPlane:a=>r(t,a)};for(let a in e)n[a]||o.warn("The userData \xBB"+a+"\xAB can not be handled by app."),n[a](a)}function i(t,e){e&&o.draggables.push(t)}function r(t,e){e&&(o.raycasterPlane=t)}return{handle:l}}(o);var y=function(){function l(e){let n=i(e);return o.scene.add(n),n}function i(e){let n=o.THREE,a=Array.isArray(e.args)?e.args:[],c=new n[e.type](...a);return c=r(c,e),c}function r(e,n){return n.properties&&(e=t(e,n.properties)),n.methods&&(e=p.applyMethods(e,n.methods)),e}function t(e,n){let a=o.THREE;if(!n||typeof n!="object")return e;for(let c in n)if(n[c]instanceof Object)if("copy"in e[c]){if("toVector3"in e[c]&&"setFromVector3"in e[c]){let u=new a.Vector3;u.setFromEuler(e[c]);let d={...u,...n[c]};e[c].setFromVector3(d)}let g={...e[c],...n[c]};e[c].copy(g)}else c==="userData"&&C.handle(e,n[c]),e[c]=t(e[c],n[c]);else p.isThreeColorValue(c)?e[c]=new a.Color(n[c]):e[c]=n[c];return e}return{add:l,create:i,change:r}}(o);var L=function(){function l(){let t=o.options;o.camera=r(t.camera),o.scene=i(t.scene),o.initSize()}function i(t){return y.create(t)}function r(t){let e=y.create(t);return e.updateProjectionMatrix(),e}return{init:l}}(o);var P=function(){function l(r,t){o.controls[r.name]=i(r,t)}function i(r,t){let e=new r(o.camera,o.renderer.domElement);return e=y.change(e,t),e}return{init:l}}(o);var A=function(){let l=o.THREE,i={};function r(e){i[e.name]=new e(o.manager)}async function t(e){return await i[e.loader].loadAsync(e.url)}return{init:r,load:t}}(o);var D=function(){function l(e){return y.create(e)}function i(e,n){return e=y.change(e,n),e}function r(e){if(typeof e=="object"&&e.type)return t(e);let n=[];return Array.isArray(e)&&e.forEach(a=>{let c=t(a);n.push(c)}),n}function t(e){let n=l(e);return o.scene.add(n),n}return{add:r,create:l,change:i}}(o);var R=function(){function l(t){t||(t={type:"MeshPhongMaterial",args:[{color:16777215}]},o.info("No options for material given, using default MeshPhongMaterial in white"));let e=o.create(t);return e=i(e,t),e}function i(t,e){let n=o.THREE;return e.properties&&(t=r(t,e.properties)),e.methods&&(t=p.applyMethods(t,e.methods)),e.textures&&(e.textures.forEach(async a=>{let c=a.loader||"TextureLoader",g=new n[c](o.manager),u=a.map,d=await g.loadAsync(a.url);t[u]=d,a.properties&&(t[u]=r(t[u],a.properties)),a.methods&&(t[u]=p.applyMethods(t,a.methods))}),t.needsUpdate=!0),t}function r(t,e){let n=o.THREE;if(!e||typeof e!="object")return t;for(let a in e)e[a]instanceof Object?t[a]={...e[a]}:p.isThreeColorValue(a)?t[a]=new n.Color(e[a]):t[a]=e[a];return t}return{create:l,change:i}}(o);var O=function(){function l(i){i||(i={type:"BoxGeometry",args:[1,1,1]},o.info("No options for geometry given, using default BoxGeometry 1x1x1"));let r=o.create(i);return r=p.merge(r,i.properties),r}return{create:l}}(o);var V=function(){function l(n){let a=o.THREE,c=R.create(n.material),g=O.create(n.geometry),u=new a.Mesh(g,c);return u=e(u,n),u}function i(n){if(typeof n=="object"){if(n.loader)return r(n);if(n.geometry)return t(n)}let a=[];return Array.isArray(n)&&n.forEach(c=>{let g=i(c);a.push(g)}),a}async function r(n){let a=await A.load(n);return o.scene.add(a.scene),a}function t(n){let a=l(n);return o.scene.add(a),a}function e(n,a){return n=y.change(n,a),a.material&&R.change(n.material,a.material),n}return{add:i,create:l,change:e}}(o);var E=function(){let l=null,i=null,r=null,t=null,e=null,n=[];function a(d){let h=o.THREE;l=new h.Plane,i=new h.Vector3(0,1,0),r=new h.Vector3,t=new h.Vector3,n=d}function c(){let d=o.raycaster.intersectObjects(n);d.length<=0||(r.copy(d[0].point),l.setFromNormalAndCoplanarPoint(i,r),t.subVectors(d[0].object.position,d[0].point),e=d[0].object,o.controls.OrbitControls.enabled=!1,o.actions.isDragging=!0,o.canvas.style.cursor="grab")}function g(){e=null,o.controls.OrbitControls.enabled=!0,o.actions.isDragging=!1,o.canvas.style.cursor="auto"}function u(){o.actions.isDragging&&(e.position.addVectors(r,t),o.raycaster.ray.intersectPlane(l,r))}return{init:a,start:c,drag:u,stop:g}}();var S=function(){function l(){let e=o.THREE;o.raycaster=o.raycaster??new e.Raycaster,o.mouse=o.mouse??{},E.init(o.draggables),document.addEventListener("mousemove",n=>{t(n)}),document.addEventListener("mousedown",n=>{i(n)}),document.addEventListener("mouseup",n=>{r(n)})}function i(){E.start()}function r(){E.stop()}function t(e){o.mouse.x=e.clientX/window.innerWidth*2-1,o.mouse.y=-(e.clientY/window.innerHeight)*2+1,o.raycaster.setFromCamera(o.mouse,o.camera),E.drag()}return{init:l}}();console.log("klee.js: "+T);export{o as App,P as Controls,E as Dragging,S as Events,O as Geometry,V as Item,T as KLEEVERSION,D as Light,A as Loaders,R as Material,y as Object3d,L as Scene};
//# sourceMappingURL=klee.min.js.map
