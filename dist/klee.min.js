var T="0.3.2";function C(l){return{debugLevel:0,responsive:!0,renderer:{type:"WebGLRenderer",args:[{antialias:!0,preserveDrawingBuffer:!0,alpha:!0}],domElement:"body",clearColor:"#000000",opacity:1,properties:{shadowMap:{enabled:!0,type:l.PCFSoftShadowMap}}},camera:{type:"PerspectiveCamera",methods:{lookAt:[0,0,0]},properties:{position:{x:-1,y:2,z:5},name:"camera-1",fov:35,aspect:window.innerWidth/window.innerHeight,near:1,far:300}},scene:{type:"Scene",properties:{name:"scene-1",position:{x:0,y:0,z:0}}}}}var g=class{static merge(s,r){if(!r||typeof r!="object")return s;for(let t of Object.keys(r))r[t]instanceof Object&&Object.assign(r[t],this.merge(s[t],r[t]));return Object.assign(s||{},r),s}static isThreeColorValue(s){return["color","specular","emissive","diffuse","background","sheen"].includes(s)}static applyMethods(s,r){r=r||{};for(let t in r){let e=Array.isArray(r[t])?r[t]:[];t in s?s[t](...e):console.log("Applied object has no method: "+t)}return s}};var a=function(){let l={},s,r={canvas:null,camera:null,renderer:null,scene:null,mouse:null,raycaster:null,manager:null,controls:{OrbitControls:null},draggables:[],actions:{isDragging:!1}};function t(c,m={}){(!c||!c.REVISION)&&d("THREE is not inserted"),s={...c},(!m||typeof m!="object")&&(m={},y("Options are set to default values")),l={...g.merge(C(s),m)},r.renderer=n(l.renderer),r.manager=new s.LoadingManager}function e(c){r.renderer.render(r.scene,r.camera),r.controls.OrbitControls&&(r.controls.OrbitControls.enableDamping||r.controls.OrbitControls.autoRotate)&&r.controls.OrbitControls.update(),typeof c=="function"&&c(),requestAnimationFrame(()=>e(c))}function i(){let c=l.responsive||!1,m=r.camera.fov,p=r.canvas.clientWidth,v=r.canvas.clientWidth,x=r.canvas.clientHeight;r.renderer.setSize(v,x),r.camera.aspect=v/x,r.camera.updateProjectionMatrix(),c!==!1&&window.addEventListener("resize",()=>{let O=window.innerWidth;v=r.canvas.clientWidth,x=r.canvas.clientHeight,O!==v&&(r.renderer.setSize(O,x),r.camera.aspect=O/x,r.camera.fov=m*p/O,r.camera.updateProjectionMatrix())})}function n(c){let m=document.querySelector(c.domElement);m instanceof HTMLCanvasElement&&(c.args.canvas=m,r.canvas=m);let p=o(c);return p=f(p,c.properties),p.setClearColor(new s.Color(c.clearColor),c.opacity),p.setPixelRatio(window.devicePixelRatio),r.canvas||(m.appendChild(p.domElement),r.canvas=p.domElement),p.setSize(r.canvas.clientWidth,r.canvas.clientHeight),p}function o(c){let m=Array.isArray(c.args)?c.args:[];return new s[c.type](...m)}function f(c,m){return g.merge(c,m)}function u(c,m){let p=l.debugLevel!==void 0?l.debugLevel:3;switch(m){case"error":throw c;case"warn":p>0&&console.warn(c);break;case"info":p>2&&console.info(c);break;default:p>1&&console.log(c);break}}function d(c){u(c,"error")}function y(c){u(c,"warn")}function E(c){u(c,"log")}function b(c){u(c,"info")}return{get canvas(){return r.canvas},get options(){return l},get THREE(){return s},get scene(){return r.scene},set scene(c){r.scene=c},get camera(){return r.camera},set camera(c){r.camera=c},get controls(){return r.controls},get renderer(){return r.renderer},get manager(){return r.manager},get draggables(){return r.draggables},get mouse(){return r.mouse},set mouse(c){r.mouse=c},get raycaster(){return r.raycaster},set raycaster(c){r.raycaster=c},get actions(){return r.actions},initSize:i,create:o,error:d,warn:y,log:E,info:b,init:t,run:e}}();var H=function(){function l(t,e){let i={draggable:n=>s(t,n),raycasterPlane:n=>r(t,n)};for(let n in e)i[n]||a.warn("The userData \xBB"+n+"\xAB can not be handled by app."),i[n](n)}function s(t,e){e&&a.draggables.push(t)}function r(t,e){e&&(a.raycasterPlane=t)}return{handle:l}}(a);var h=function(){function l(e){let i=s(e);return a.scene.add(i),i}function s(e){let i=a.THREE,n=Array.isArray(e.args)?e.args:[],o=new i[e.type](...n);return o=r(o,e),o}function r(e,i){return i.properties&&(e=t(e,i.properties)),i.methods&&(e=g.applyMethods(e,i.methods)),e}function t(e,i){let n=a.THREE;if(!i||typeof i!="object")return e;for(let o in i)if(i[o]instanceof Object)if("copy"in e[o]){if("toVector3"in e[o]&&"setFromVector3"in e[o]){let u=new n.Vector3;u.setFromEuler(e[o]);let d={...u,...i[o]};e[o].setFromVector3(d)}let f={...e[o],...i[o]};e[o].copy(f)}else o==="userData"&&H.handle(e,i[o]),e[o]=t(e[o],i[o]);else g.isThreeColorValue(o)?e[o]=new n.Color(i[o]):e[o]=i[o];return e}return{add:l,create:s,change:r}}(a);var S=function(){function l(){let t=a.options;a.camera=r(t.camera),a.scene=s(t.scene),a.initSize()}function s(t){return h.create(t)}function r(t){let e=h.create(t);return e.updateProjectionMatrix(),e}return{init:l}}(a);var P=function(){function l(r,t){a.controls[r.name]=s(r,t)}function s(r,t){let e=new r(a.camera,a.renderer.domElement);return e=h.change(e,t),e}return{init:l}}(a);var A=function(){let l={};function s(t){l[t.name]=new t(a.manager)}async function r(t){return await l[t.loader].loadAsync(t.url)}return{init:s,load:r}}(a);var L=function(){function l(e){return h.create(e)}function s(e,i){return e=h.change(e,i),e}function r(e){if(typeof e=="object"&&e.type)return t(e);let i=[];return Array.isArray(e)&&e.forEach(n=>{let o=t(n);i.push(o)}),i}function t(e){let i=l(e);return a.scene.add(i),i}return{add:r,create:l,change:s}}(a);var R=function(){function l(t){t||(t={type:"MeshPhongMaterial",args:[{color:16777215}]},a.info("No options for material given, using default MeshPhongMaterial in white"));let e=a.create(t);return e=s(e,t),e}function s(t,e){let i=a.THREE;return e.properties&&(t=r(t,e.properties)),e.methods&&(t=g.applyMethods(t,e.methods)),e.textures&&(e.textures.forEach(async n=>{let o=n.loader||"TextureLoader",f=new i[o](a.manager),u=n.map,d=await f.loadAsync(n.url);t[u]=d,n.properties&&(t[u]=r(t[u],n.properties)),n.methods&&(t[u]=g.applyMethods(t,n.methods))}),t.needsUpdate=!0),t}function r(t,e){let i=a.THREE;if(!e||typeof e!="object")return t;for(let n in e)e[n]instanceof Object?t[n]={...e[n]}:g.isThreeColorValue(n)?t[n]=new i.Color(e[n]):t[n]=e[n];return t}return{create:l,change:s}}(a);var M=function(){function l(s){s||(s={type:"BoxGeometry",args:[1,1,1]},a.info("No options for geometry given, using default BoxGeometry 1x1x1"));let r=a.create(s);return r=g.merge(r,s.properties),r}return{create:l}}(a);var D=function(){function l(n){let o=a.THREE,f=R.create(n.material),u=M.create(n.geometry),d=new o.Mesh(u,f);return d=i(d,n),d}function s(n){if(typeof n=="object"){if(n.loader)return r(n);if(n.geometry)return e(n)}let o=[];return Array.isArray(n)&&n.forEach(f=>{let u=s(f);o.push(u)}),o}async function r(n){let o=await A.load(n);if(o.scene){let f=t(o.scene,n);return f=i(f,n),f.receiveShadow=!1,f.castShadow=!1,a.scene.add(f),f}else return o=i(o,n),a.scene.add(o),o}function t(n,o){let f=a.THREE,u=new f.Box3().setFromObject(n),d=u.getCenter(new f.Vector3),y=.001,E={x:u.max.x-u.min.x+y,y:u.max.y-u.min.y+y,z:u.max.z-u.min.z+y},b=new f.BoxGeometry(E.x,E.y,E.z);o.material||(o.material={color:16777215,transparent:!0,opacity:0});let c=new f.MeshBasicMaterial(o.material),m=new f.Mesh(b,c);m.position.y=E.y/2,n.position.x+=n.position.x-d.x,n.position.y+=n.position.y-d.y,n.position.z+=n.position.z-d.z,m.renderOrder=1;for(let p of n.children)p.isMesh&&(p.receiveShadow=o.properties.receiveShadow||!1,p.castShadow=o.properties.castShadow||!1,p.material.side=f.DoubleSide);return m.add(n),m}function e(n){let o=l(n);return a.scene.add(o),o}function i(n,o){return n=h.change(n,o),o.material&&R.change(n.material,o.material),n}return{add:s,create:l,change:i}}(a);var w=function(){let l=null,s=null,r=null,t=null,e=null,i=[];function n(d){let y=a.THREE;l=new y.Plane,s=new y.Vector3(0,1,0),r=new y.Vector3,t=new y.Vector3,i=d}function o(){let d=a.raycaster.intersectObjects(i);d.length<=0||(r.copy(d[0].point),l.setFromNormalAndCoplanarPoint(s,r),t.subVectors(d[0].object.position,d[0].point),e=d[0].object,a.controls.OrbitControls.enabled=!1,a.actions.isDragging=!0,a.canvas.style.cursor="grab")}function f(){e=null,a.controls.OrbitControls.enabled=!0,a.actions.isDragging=!1,a.canvas.style.cursor="auto"}function u(){a.actions.isDragging&&(e.position.addVectors(r,t),a.raycaster.ray.intersectPlane(l,r))}return{init:n,start:o,drag:u,stop:f}}();var V=function(){function l(){let e=a.THREE;a.raycaster=a.raycaster??new e.Raycaster,a.mouse=a.mouse??{},w.init(a.draggables),document.addEventListener("mousemove",i=>{t(i)}),document.addEventListener("mousedown",i=>{s(i)}),document.addEventListener("mouseup",i=>{r(i)})}function s(){w.start()}function r(){w.stop()}function t(e){a.mouse.x=e.clientX/window.innerWidth*2-1,a.mouse.y=-(e.clientY/window.innerHeight)*2+1,a.raycaster.setFromCamera(a.mouse,a.camera),w.drag()}return{init:l}}();console.log("klee.js: "+T);export{a as App,P as Controls,w as Dragging,V as Events,M as Geometry,D as Item,T as KLEEVERSION,L as Light,A as Loaders,R as Material,h as Object3d,S as Scene};
//# sourceMappingURL=klee.min.js.map
